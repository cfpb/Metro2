# Metro2 Tool Front-End

## Features

- [Vite](https://vitejs.dev) with [React](https://reactjs.org), [TypeScript](https://www.typescriptlang.org) and [absolute imports](https://github.com/aleclarson/vite-tsconfig-paths).
- Uses [ESLint](https://eslint.org), [stylelint](https://stylelint.io) and [Prettier](https://prettier.io)
- Unit tests with [Vitest](https://vitest.dev/) and [Testing Library](https://testing-library.com/).
- e2e and component tests with [Cypress](https://www.cypress.io).

## Running locally

### Requirements

- Node.js (v18+)
- yarn (berry)
- pnpm

To run successfully, the front end needs access to the API provided by the Django app. There are a couple of ways to accomplish this:

1. The simplest option is to run the full app with docker-compose as described in the main README (`docker compose build` and `docker compose up`).

2. You can also run the app locally by following the directions to run the Django app in the Django directory's README and then running `yarn install` and `yarn dev` in the `front-end` directory.

In either case, navigate to [http://localhost:3000](http://localhost:3000) to view the front end of the app.

## Main Scripts

In `front-end` you can run:

`yarn dev`: Runs the app in development mode at [http://localhost:3000](http://localhost:3000). The page will reload if you edit `src` files.

`yarn build`: Builds files for production to the `dist` directory.

`yarn preview`: Previews the files generated by the build script at [http://localhost:4173](http://localhost:4173).

`yarn validate`: Runs linting, unit tests, and e2e tests on the files generated by the build script.

## Available Scripts

- `yarn dev` - start a development server with hot reload.
- `yarn build` - build for production. The generated files will be on the `dist` folder.
- `yarn preview` - locally preview the production build.
- `yarn test` - run unit and integration tests related to changed files based on git.
- `yarn test:ci` - run all unit and integration tests in CI mode.
- `yarn test:e2e` - run all e2e tests with the Cypress Test Runner.
- `yarn test:e2e:headless` - run all e2e tests headlessly.
- `yarn format` - format all files with Prettier.
- `yarn lint` - runs TypeScript, ESLint and Stylelint.
- `yarn validate` - runs `lint`, `test:ci` and `test:e2e:headless`.
